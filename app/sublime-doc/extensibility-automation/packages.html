<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<title>包</title>
	<link rel="stylesheet" href="../main.css">
</head>
<body>
	<h1>包(Packages)</h1>
	<h2>概述</h2>
	<p>包是资源的容器</p>
	<h2>包位置(和缩写)</h2>
	<p>为了不同的目的有三个存储包的位置。</p>
	<ul>
		<li>包可以是<code>Data/Packages</code>下的文件夹(缩写：<code>Packages</code>)</li>
		<li>或者使用<code>.sublime_package</code>扩展名的zip文件，位于<code>Data/Installed Packages</code>下(缩写：<code>Installed Packages</code>)或者其下的任意子目录。</li>
		<li>另外，ST提供了一级默认的作为zip文件的包，在<code>Application/Packages</code>(缩写：<code>Shipped Packages</code>)，<code>Application</code>指的是放置ST可执行文件的文件夹。
		<p>不建议用户修改此文件夹。</p>
		</li>
	</ul>
	<div class="quote">
		<h3>注意</h3>
		<p>为简单起见，我们偶尔会简单地用<code>Packages</code>来引用所有这些目录，并且使用<code>Packages/PackageName</code>来引用在任意文件夹中的包(不论是不是<code>.sublime-package</code>)。因此，一个包中的文件可能也会使用<code>PackageName/a_file.extension</code>被引用。</p>
	</div>
	<h3><code class="boldcode">.sublime_package</code>包</h3>
	<p>作为<code>.sublime-package</code>zip文件分发的包应当被认为是只读的资源容器并且决不能手动修改。因为它们通常作为一个整体更新，任何对它们手动的改变都会在过程中迷失。</p>
	<p>如果你想在这些归档中修改文件，参阅<a href="">定制或者重写包</a></p>
	<h3>同名包之间的交互</h3>
	<p>如果在<code>Installed Packages</code>和<code>Shipped Packages</code>中存在具有相同名称的两个包，<code>Installed Packages</code>中的会被使用，<code>Shipped Packages</code>中的会被忽略。</p>
	<p>任何<code>Packages/PackageName</code>中的文件与在<code>Installed Packages/PackageName.sublime-package</code>或者<code>Shipped Packages/PackageName.sublime-package</code>中的相同命名文件相比，具有更高的优先级。</p>
	<p>另请参阅<a href="">定制或者重写包</a></p>
	<h2>包内容</h2>
	<p>供给包的标准资源包括：</p>
	<ul>
		<li>构建系统(<code>.sublime-build</code>)</li>
		<li>颜色模式(<code>.tmTheme</code>)</li>
		<li>键映射(<code>.sublime-keymap</code>)</li>
		<li>宏(<code>.sublime-macro</code>)</li>
		<li>菜单(<code>.sublime-menu</code>)</li>
		<li>元数据(<code>.tmPreferences</code>)</li>
		<li>鼠标映射(<code>.sublime-mousemap</code>)</li>
		<li>插件(<code>.py</code>)</li>
		<li>设置(<code>.sublime-settings</code>)</li>
		<li>片断(<code>.sublime-snippet</code>)</li>
		<li>语法定义(<code>.tmLanguage</code>)</li>
		<li>主题(<code>.sublime-theme</code>)</li>
	</ul>
	<p>一些包可能为其它包或者为核心特性保存支持文件。例如，拼写检查使用<code>Installed Packages/Language - English.sublime-package</code>作为英语词典的数据存储。</p>
	<h2>包的类型</h2>
	<p>在本指南中，讨论此主题时我们清晰地为包分类，但是ST不使用此术语并且你不需要学习它。</p>
	<p class="explain"><strong>shipped packages</strong><br><strong>default packages</strong><br>ST附带的一组包。这些包中的一部分是核心包，其它增强ST以开箱即用的支持一般的编程语言。<br><br>示例：Default, Python, Java, C++, Markdown。<br><br>位于<code>Shipped Packages</code></p>
	<p class="explain"><strong>core packages</strong><br>ST的正常运行需要这些包。<br><br>完整列表：Default, Theme - Default, Color Scheme - Default, Text, Language - English。<br><br>它们是shipped packages的一部分并且位于<code>Shipped Packages</code>。</p>
	<p class="explain"><strong>user packages</strong><br>由用户安装或创建以扩展ST的功能。它们不是ST的一部分，通常由用户或第三方贡献。<br><br>用户。<br><br>位于<code>Packages</code>和<code>Installed Packages</code>。</p>
	<p class="explain"><strong>installed packages</strong><br>user packages的子类型。<br><br>安装的包是<code>.sublime-package</code>归档，通常由一个包管理器维护。<br><br>位于<code>Installed Packages</code></p>
	<p class="explain"><strong>override packages</strong><br>user packages的一个特别类型。<br><br>override packages用作作为<code>.sublime-package</code>文件的定制包。它们实际上注入到原始包中并且不能独立存在。<br><br>详细信息请查阅<a href="">定制或者重写包</a>。<br><br>位于<code>Packages</code>中。</p>
	<p>注意，对于第三方我们也指的是其它编辑器的用户，尤其是Textmate，因为ST和Textmate分享一些类型的资源文件，这些文件不加修改就可以直接重用。</p>
	<h2>管理包</h2>
	<h3>安装包</h3>
	<div class="quote">
		<h3>注意</h3>
		<p>普通用户几乎不需要知道怎样手动安装包，因为有可用的自动包管理器。</p>
		<p>ST事实上的包管理器是<a href="https://packagecontrol.io/">Package Control</a>。</p>
	</div>
	<p>可以使用两种主要的方式安装包：</p>
	<ul>
		<li>通过复制ST资源文件到<code>Packages</code>下的文件夹，或者</li>
		<li>通过复制<code>.sublime-package</code>文件到<code>Installed Packages</code>。</li>
	</ul>
	<h3>禁用包</h3>
	<p>要临时禁用包，你可以将它们添加到你的<code>Packages/User/Preferences.sublime-settings</code>文件的<code>igonred_packages</code>列表。当设置文件保存时，会根据需要加载或者卸载包。</p>
	<h3>启用包</h3>
	<p>要重新起用某个包，从<code>Packages/User/Preferences.sublime-settings</code>文件的<code>igonred_packages</code>列表中删除包的名称。</p>
	<h3>删除包</h3>
	<p>如果你使用包管理器安装了某个包，使用由包管理器提供的方法将其删除。</p>
	<p>如果你手动安装了某个包，跟随下面的步骤以安全地将其删除。</p>
	<ol>
		<li>当ST在运行的时候禁用此包。</li>
		<li>关闭ST。</li>
		<li>从磁盘删除此包的资源文件。</li>
		<li>从<code>ignored_packages</code>列表中删除此包的名称。</li>
	</ol>
	<p>除了你初始放置在<code>Packages</code>文件夹或者<code>Installed Packages</code>文件夹中的资源之外，插件可能创建配置文件(例如<code>.sublime-settings</code>文件)或者其它文件来存储与包相关的数据。通常，你会在User package中找到它们。因此，如果你想要删除某个包的所有痕迹，你需要找到并且删除可能被安装的所有附加文件。</p>
	<div class="quote warn">
		<h3 class="warnh">警告</h3>
		<p>附带的包在ST每次更新期间会被恢复，所以你永远不能删除它们。如果你想要停止使用某个附带包，禁用它。</p>
	</div>
	<h3>定制或者重写包</h3>
	<p>因为<code>.sublime-package</code>zip归档中的包是只读的，你不能直接修改它们。然而，ST允许你创建一个重写的包，这个包实际上会在不修改归档自身的情况下将文件注入到原始的归档中。</p>
	<p>要创建一个重写的包，在<code>Packages</code>下新建一个文件夹然后以你想要重写的<code>.sublime-package</code>文件的名字为其命名，不包括扩展名。你在此事包中创建任何文件都会比在原始包中相同的命名文件有更高的优先级。</p>
	<p>重写包中的Python插件能够使用相关的入口以访问对应<code>.sublime-package</code>文件中的其它模块，就好像它们是对应<code>.sublime-package</code>文件的一部分。</p>
	<div class="quote warn">
		<h3 class="warnh">警告</h3>
		<p>重写包中的文件重写整个文件。如果对应<code>.sublime-package</code>文件被更新，你不会被通知。</p>
	</div>
	<h3>合并以及优先顺序</h3>
	<p>对于合并某些资源来说包的优先级是重要的，例如，<code>.sublime-keymap</code>和<code>.sublime-settings</code>文件，并且对于装载插件(<code>.py</code>文件)也两样重要。</p>
	<p>如果存在一个对应于<code>.sublime-package</code>包的重写包，它会与<code>.sublime-package</code>归档同时被装载。</p>
	<p>ST使用下面的顺序装载包：</p>
	<ol>
		<li><code>Packages/Default</code>；</li>
		<li>shipped packages，使用字典顺序；</li>
		<li>installed packages，使用字典顺序；</li>
		<li>所有余下的user packages，除了没有重写任何东西的<code>Packages/User</code>，使用字典顺序；</li>
		<li><code>Packages/User</code></li>
	</ol>
	<h3>恢复ST到默认设置</h3>
	<p>恢复ST到一个初始状态会解决很多问题，这些问题好像是ST中的bug，但实际上是由行为不当的包和插件引起的。</p>
	<p>要恢复ST到默认设置，并且删除你所有的设置和配置，请删除数据目录(data directory)并且重启编辑器。请记住<code>Installed Packages</code>文件夹也会被删除，所以你会丢失你所有的安装包。</p> 
	<p>始终确保在采取像这样的极端措施之前备份你的数据。</p>
</body>
</html>